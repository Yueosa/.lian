# ========================================
# ä¿®å¤
# å‡å¦‚ä½ ä¸çŸ¥é“é…ç½®æ”¾å“ªé‡Œå°±å¾€è¿™é‡Œå¡å§ :)
# ========================================
# è§£å†³ Xwayland çš„åŒæ­¥é—®é¢˜
cursor {
    no_hardware_cursors = true
}

# ç¦ç”¨ hyprland é»˜è®¤å£çº¸
misc {
    disable_hyprland_logo = true
}


# ========================================
# çª—å£è§„åˆ™
# ========================================
# Rofi
windowrule = float on, center on, match:class ^(Rofi)$

# gnome-calendar
windowrule = float on, size 360 600, center on, match:class ^(org.gnome.Calendar)$

# nmrs
windowrule = float on, size 400 600, center on, match:class ^(org.netrs.ui)$

# pavucontrol
windowrule = float on, size 600 740, center on, match:class ^(org.pulseaudio.pavucontrol)$

# buleman-manager
windowrule = float on, size 560 800, center on, match:class ^(blueman-manager)$

# tuxedo-control-center
windowrule = float on, size 1250 800, center on, match:class ^(tuxedo-control-center)$

# lianwall-gui
windowrule = float on, size 720 900, center on, match:class ^(lianwall-gui)$

# QQ
windowrule = tile on, match:class ^(QQ)$, match:title ^(QQ)$

# mihomo-party è‡ªåŠ¨è¿›å…¥ workspace 10
windowrule {
    name = windowrule-1
    workspace = 10 silent
    match:class = ^(mihomo-party)$
}


# ========================================
# NVIDIA ä¸“å±ç¯å¢ƒå˜é‡
# ========================================
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct
env = WLR_NO_HARDWARE_CURSORS,1
env = ELECTRON_OZONE_PLATFORM_HINT,auto


# ========================================
# Qt ç¯å¢ƒå˜é‡
# ========================================
# å¼ºåˆ¶ Qt ä½¿ç”¨ wayland
env = QT_QPA_PLATFORM,wayland;xcb
# å¯ç”¨è‡ªåŠ¨ç¼©æ”¾é€‚é…é«˜åˆ†å±
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
# ä½¿ç”¨ qt6ctç»Ÿä¸€ç®¡ç†ä¸»é¢˜
env = QT_QPA_PLATFORMTHEME,qt6ct


# ========================================
# é¼ æ ‡æŒ‡é’ˆç›¸å…³
# ========================================
env = XCURSOR_THEME,BreezeX-RosePineDawn-Linux
env = XCURSOR_SIZE,24

# æ–°ç‰ˆ Hyprland å»ºè®®åŠ ä¸Šè¿™ä¸ª
env = HYPRCURSOR_THEME,BreezeX-RosePineDawn-Linux
env = HYPRCURSOR_SIZE,24


# ========================================
# å…¨å±€å˜é‡å®šä¹‰
# ========================================
# æˆªå›¾ä¿å­˜ç›®å½•
$screenshot_dir = $HOME/Pictures/Screenshots
$area_path = $screenshot_dir/Area_$(date +'%Y%m%d_%H%M%S').png
$screenshot_path = $screenshot_dir/Screenshot_$(date +'%Y%m%d_%H%M%S').png
# è„šæœ¬ç›®å½•
$script_dir = $HOME/.local/bin


# ========================================
# æ˜¾ç¤ºå™¨è®¾ç½®
# ========================================
# monitor=,preferred,auto,1
gpu = auto


# ========================================
# è‡ªåŠ¨å¯åŠ¨ç¨‹åº
# ========================================
# æ ¸å¿ƒç¯å¢ƒè®¾ç½®
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = hyprctl setcursor BreezeX-RosePineDawn-Linux 24
exec-once = mkdir -p $screenshot_dir

# ç³»ç»ŸåŸºç¡€ç»„ä»¶
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = fcitx5 -d
exec-once = kanshi

# ç•Œé¢ç»„ä»¶
exec-once = swaync
exec-once = lianwall-gui
exec-once = sleep 3 && $script_dir/waybar/lbar start

# å·¥å…·å’Œåº”ç”¨
exec-once = wl-paste --watch cliphist store
exec-once = mihomo-party
exec-once = /opt/tuxedo-control-center/tuxedo-control-center --tray


# ========================================
# å¤–è§‚è®¾ç½®
# ========================================
general {
    gaps_in = 6							# å†…é—´è· ç›¸é‚»ä¸¤ä¸ªçª—å£ä¹‹é—´çš„ç¼éš™å¤§å°
    gaps_out = 12						# å¤–é—´è· çª—å£ä¸æ˜¾ç¤ºå™¨è¾¹ç¼˜çš„è·ç¦»
    border_size = 3						# è¾¹æ¡†åšåº¦
    col.active_border = rgba(ffb7c5ee) rgba(87cefaee) rgba(ffffffee) 45deg	# æ´»åŠ¨çª—å£è¾¹æ¡†é¢œè‰²
    col.inactive_border = rgba(87cefa55)			# éæ´»åŠ¨çª—å£
    layout = dwindle						# å¸ƒå±€æ¨¡å¼
}

decoration {
    rounding = 12			# çª—å£åœ†è§’

    # å¼€å¯åŠé€æ˜
    active_opacity = 0.9
    inactive_opacity = 0.6

    shadow {
        enabled = true
        range = 15			# é˜´å½±æ‰©æ•£èŒƒå›´
	render_power = 3
        color = rgba(b19cd933)		# é˜´å½±é¢œè‰²
    }
    blur {
        enabled = true
        size = 8			# æ¨¡ç³ŠåŠå¾„
        passes = 2			# æ¨¡ç³Šæ¬¡æ•°
	new_optimizations = true
    }
}

animations {				# åŠ¨ç”»
    enabled = yes
    bezier = fastIn, 0.16, 1, 0.3, 1

    animation = windowsIn, 1, 3, fastIn, slide
    animation = windowsOut, 1, 2.5, fastIn, slide
    animation = windowsMove, 1, 2, fastIn
    animation = workspaces, 1, 4, fastIn, slide
}

# wlogout å¤–è§‚
layerrule {
    name = layerrule-1
    blur = on
    ignore_alpha = 0
    match:namespace = wlogout
}

windowrule = opacity 1.0 override, match:class ^(kitty)$



# ========================================
# å…‰æ ‡ä¸»é¢˜ + å¤§å°
# ========================================
cursor = Bibata-Anime 32


# ========================================
# è¾“å…¥è®¾ç½®
# ========================================
input {
    kb_layout = us
    follow_mouse = 1
    touchpad {
        natural_scroll = false
    }
}


# ========================================
# åŸºç¡€ç¨‹åºå®šä¹‰ï¼ˆå¿«æ·é”®ä½¿ç”¨ï¼‰
# ========================================
# ç»ˆç«¯
$terminal = kitty
# æ–‡ä»¶ç®¡ç†å™¨
$fileManager = thunar
# æµè§ˆå™¨
$browser = google-chrome-stable
# rofi è„šæœ¬ --- å”¤èµ·åº”ç”¨ç¨‹åº
$menu_app = $script_dir/rofi/rofi-launcher drun
# rofi è„šæœ¬ --- å”¤èµ·çª—å£åˆ‡æ¢
$menu_window = $script_dir/rofi/rofi-launcher window 
# wlogout è„šæœ¬ --- å”¤èµ·ç³»ç»Ÿèœå•
$sysmenu = $script_dir/wlogout/wlogout
# swaync é€šçŸ¥ä¸­å¿ƒ
$sclient = swaync-client -t
# å‰ªè´´æ¿è„šæœ¬ --- å”¤èµ·å‰ªè´´æ¿å†å²
$clipboard = $script_dir/rofi/cliphist
# å·¥ä½œåŒºè„šæœ¬ --- å¿«é€Ÿåˆ‡æ¢å·¥ä½œåŒº 
$window = $script_dir/waybar/waybar-workspaces


# ========================================
# æ ¸å¿ƒå¿«æ·é”®
# ========================================
$mainMod = SUPER

# === æ€æ‰ çª—å£ ===
bind = $mainMod, Q, killactive,

# === åˆ‡æ¢ çª—å£æ¨¡å¼ ===
bind = $mainMod, W, togglefloating,

# === é€€å‡º hyprland ===
bind = $mainMod, M, exit, command -v hyprshutdown >/dev/null 2>&1 && hyprshutdown || hyprctl dispatch exit


# === æ‰“å¼€ ç»ˆç«¯ ===
bind = $mainMod, T, exec, $terminal

# === æ‰“å¼€ æ–‡ä»¶ç®¡ç†å™¨ ===
bind = $mainMod, E, exec, $fileManager

# === æ‰“å¼€ rofi drun ===
bind = $mainMod, A, exec, $menu_app

# === æ‰“å¼€ rofi window ===
bind = ALT, TAB, exec, $menu_window

# === æ‰“å¼€ wlogout ===
bind = $mainMod, SPACE, exec, $sysmenu

# === æ‰“å¼€ å‰ªè´´æ¿ ===
bind = $mainMod, Z, exec, $clipboard

# === æ‰“å¼€é€šçŸ¥ä¸­å¿ƒ ===
bind = ALT, SPACE, exec, $sclient

# === æ‰“å¼€ æµè§ˆå™¨ ===
bind = $mainMod, B, exec, $browser


# === åŒºåŸŸæˆªå›¾ ===
# å¤åˆ¶åˆ°å‰ªè´´æ¿ + ä¿å­˜åˆ°æ–‡ä»¶ + å‘é€åˆ°é€šçŸ¥
# æ–‡ä»¶åæ ¼å¼ï¼šArea_20231024_123456.png
bind = CTRL_ALT, A, exec, filepath=$area_path && grim -g "$(slurp)" "$filepath" && wl-copy < "$filepath" && notify-send "âœ‚ï¸ åŒºåŸŸæˆªå›¾å·²ä¿å­˜" "å·²æˆªå–é€‰ä¸­åŒºåŸŸ" -i "$filepath" -a "Grim"

# === å…¨å±æˆªå›¾ ===
# å¤åˆ¶åˆ°å‰ªè´´æ¿ + ä¿å­˜åˆ°æ–‡ä»¶ + å‘é€åˆ°é€šçŸ¥
# æ–‡ä»¶åæ ¼å¼ï¼šScreenshot_20231024_123456.png
bind = CTRL_ALT, Q, exec, filepath=$screenshot_path && grim "$filepath" && wl-copy < "$filepath" && notify-send "ğŸ“¸ å…¨å±æˆªå›¾å·²ä¿å­˜" "å›¾ç‰‡å·²å­˜å…¥å‰ªè´´æ¿" -i "$filepath" -a "Grim"


# å£çº¸ç®¡ç†
bind = ALT, N, exec, lianwall next
bind = ALT, S, exec, lianwall switch

# è·å–çª—å£ä¿¡æ¯
bind = $mainMod, X, exec, $script_dir/waybar/waybar-window show

# äº®åº¦ç®¡ç†
bind = $mainMod SHIFT, up, exec, brightnessctl set +5%
bind = $mainMod SHIFT, down, exec, brightnessctl set 5%-

# å¿«æ·å·¥ä½œåŒºåˆ‡æ¢
bind = $mainMod SHIFT, left, exec, $window down
bind = $mainMod SHIFT, right, exec, $window up
bind = $mainMod SHIFT, down, exec, $window empty

# å·¥ä½œåŒºåˆ‡æ¢
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# ç§»åŠ¨çª—å£åˆ°å·¥ä½œåŒº
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ç„¦ç‚¹çª—å£åˆ‡æ¢
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# é¼ æ ‡æ“ä½œ
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
